%html
  %head
    %title Scotland's Covid-19 Data
    %link{rel: 'stylesheet', href:'index.css'}
  %body
    %h1 Scotland's Covid-19 Data
    %p
      This site hastily throuwn together by
      %a{href: 'https://twitter.com/robertgauld'}@RobertGauld
      , the code is available at
      %a{href: 'https://github.com/robertgauld/scotland-covid19-data'}https://github.com/robertgauld/scotland-covid19-data
    %p
      Thanks to
      %a{href: 'https://twitter.com/watty62'} @watty62
      for collecting and preprocessing the Scotland data at
      %a{href: 'https://github.com/watty62/Scot_covid19'} https://github.com/watty62/Scot_covid19
      Data upto #{upto_scotland.strftime('%A %-d %B %Y')} is currently available and displayed.
      %br
      Thanks to
      %a{href: 'https://github.com/tomwhite'} tomwhite
      for collecting and preprocessing the UK data at
      %a{href: 'https://github.com/tomwhite/covid-19-uk-data'} https://github.com/tomwhite/covid-19-uk-data
      Data upto #{upto_uk.strftime('%A %-d %B %Y')} is currently available and displayed.
      - if updating
        %span.highlight
          The data is currently being updated.
    %p
      On start up and every hour thereafter this site checks for new data and if 
      new data is available it regenerates itself.
      - if updating
        %span.highlight
          The data is currently being updated.
      Two of the graphs below are absent as the corresponding health boards (Orkney and Western Isles)
      have reported zero cases. When they report a case then the graphs will be automatically generated.

    #links{style: 'padding-left: 15%; padding-right: 15%;'}
      %div{style: 'display: inline-block; min-width: 16em;'}
        %a{style: 'margin-left: 1em; margin-right: 1em;', href: '#uk'} UK
      %div{style: 'display: inline-block; min-width: 16em;'}
        %a{style: 'margin-left: 1em; margin-right: 1em;', href: '#scotland'} Scotland
      %br
      %br
      - health_boards.each do |health_board|
        - health_board_link = health_board.downcase.gsub(' ', '_')
        %div{style: 'display: inline-block; min-width: 16em;'}
          %a{style: 'margin-left: 1em; margin-right: 1em;', href: "##{health_board_link}"}=health_board

    %hr

    %a{name: 'uk'}
    %h2 Whole of the UK
    #uk
      .chart
        %a{href: "/uk_cases_per_#{numbers_per}.png"}
          %img{src: "/uk_cases_per_#{numbers_per}.png", width: 450, height: 300}
        -#%br
        -#%a{href: "/uk_cases_per_#{numbers_per}.csv"} Download data
      .chart
        %a{href: "/uk_deaths_per_#{numbers_per}.png"}
          %img{src: "/uk_deaths_per_#{numbers_per}.png", width: 450, height: 300}
        -#%br
        -#%a{href: "/uk_deaths_per_#{numbers_per}.csv"} Download data
      .chart
        %a{href: '/england_vs_uk.png'}
          %img{src: '/england_vs_uk.png', width: 450, height: 300}
        -#%br
        -#%a{href: '/england_vs_uk.csv'} Download data
      .chart
        %a{href: '/scotland_vs_uk.png'}
          %img{src: '/scotland_vs_uk.png', width: 450, height: 300}
        -#%br
        -#%a{href: '/scotland_vs_uk.csv'} Download data
      .chart
        %a{href: '/wales_vs_uk.png'}
          %img{src: '/wales_vs_uk.png', width: 450, height: 300}
        -#%br
        -#%a{href: '/wales_vs_uk.csv'} Download data
      .chart
        %a{href: '/northern_ireland_vs_uk.png'}
          %img{src: '/northern_ireland_vs_uk.png', width: 450, height: 300}
        -#%br
        -#%a{href: '/northern_ireland_vs_uk.csv'} Download data

    %a{name: 'scotland'}
    %h2 Whole of Scotland
    #scotland
      .chart
        %a{href: '/daily_tests.png'}
          %img{src: '/daily_tests.png', width: 450, height: 300}
        %br
        %a{href: '/tests.csv'} Download data
      .chart
        %a{href: '/cumulative_tests.png'}
          %img{src: '/cumulative_tests.png', width: 450, height: 300}
        %br
        %a{href: '/tests.csv'} Download data
      .chart
        %a{href: "/scotland_cases_per_#{numbers_per}.png"}
          %img{src: "/scotland_cases_per_#{numbers_per}.png", width: 450, height: 300}
        -#%br
        -#%a{href: "/scotland_cases_per_#{numbers_per}.csv"} Download data
      .chart
        %a{href: "/scotland_deaths_per_#{numbers_per}.png"}
          %img{src: "/scotland_deaths_per_#{numbers_per}.png", width: 450, height: 300}
        -#%br
        -#%a{href: "/scotland_deaths_per_#{numbers_per}.csv"} Download data
      .chart
        %a{href: '/icu_deceased.png'}
          %img{src: '/icu_deceased.png', width: 450, height: 300}
        %br
        %a{href: '/icu_deceased.csv'} Download data
      .chart
        %a{href: '/scotland_vs_uk.png'}
          %img{src: '/scotland_vs_uk.png', width: 450, height: 300}
        -#%br
        -#%a{href: '/scotland_vs_uk.csv'} Download data

    %hr

    - health_boards.each do |health_board|
      - health_board_link = health_board.downcase.gsub(' ', '_')
      %a{name: health_board_link}
      %h2=health_board
      %a{href: "/#{health_board_link}_per_#{numbers_per}.csv"} Download data
      %div{id: health_board_link, class: 'health_board'}
        .chart
          %a{href: "/#{health_board_link}_per_#{numbers_per}.png"}
            %img{src: "/#{health_board_link}_per_#{numbers_per}.png", width: 450, height: 300}
        .chart
          %a{href: "/#{health_board_link}_vs_scotland.png"}
            %img{src: "/#{health_board_link}_vs_scotland.png", width: 450, height: 300}
